{% extends "base.html" %}

{% block title %}Patients - MediArch{% endblock %}

{% block page_header %}
<div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6">
  <h2 class="text-2xl font-bold text-brand-light">Patient Records</h2>
  <a href="{{ url_for('main.add_patient') }}" class="btn btn-primary">Add New Patient</a>
</div>
{% endblock %}

{% block content %}
{% if patients %}
<div class="bg-dark-700 p-6 rounded-lg shadow-md border border-dark-600 overflow-x-auto">
  <table class="table min-w-full">
    <thead>
      <tr>
        <th>ID</th>
        <th>Last Name</th>
        <th>First Name</th>
        <th>Birth Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for patient in patients %}
      <tr>
        <td>{{ patient.id }}</td>
        <td>{{ patient.last_name }}</td>
        <td>{{ patient.first_name }}</td>
        <td>{{ patient.birth_date }}</td>
        <td class="flex space-x-3">
          <a href="{{ url_for('main.view_patient', patient_id=patient.id) }}" class="text-brand hover:text-brand-light no-underline">View</a>
          <a href="{{ url_for('main.edit_patient', patient_id=patient.id) }}" class="text-emerald-400 hover:text-emerald-300 no-underline">Edit</a>
          <a href="{{ url_for('main.delete_patient', patient_id=patient.id) }}" class="text-red-400 hover:text-red-300 no-underline" onclick="return confirm('Are you sure you want to delete this patient?')">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="bg-dark-700 p-8 rounded-lg shadow-md border border-dark-600 text-center">
  <p class="text-lg text-gray-300 mb-4">No patients found in the database.</p>
  <a href="{{ url_for('main.add_patient') }}" class="btn btn-primary mt-2">Add First Patient</a>
</div>
{% endif %}
{% endblock %} 